---
layout: default
title: States_And_Modes_MDD
nav_order: 5
parent: State and Modes
---
{% raw %}
# Module --  [module---]

# High-Level Description

This module handles the EPS system state transitions and is used to
determine the operating system state based on knowledge of customer and
internal inputs. The System State is used in turn by the Scheduler to
determine the task list to be executed in a particular state.

# Figures

## Component Diagram 

None, files are generated by Configurator.

#  Variable Data Dictionary

| Module Inputs                        | Module Outputs                               |
|------------------------------------|------------------------------------|
| CTerm_Cnt_lgc                        | CloseCheck_Cnt_u32                           |
| ATerm_Cnt_lgc                        | TypeHData_Cnt_u08\[D_TYPEHDATASIZE_CNT_U16\] |
| FTerm_Cnt_lgc                        | PwrDnFastWriteComplete_Cnt_lgc               |
| RampStatusComplete_Cnt_lgc           | InitiatePwrDnFastWrite_Cnt_lgc               |
| ControlledDampStatusComplete_Cnt_lgc | InitiatePwrDnNormalWrite_Cnt_lgc             |
| TMFTestComplete_Cnt_lgc              |                                              |

###  [section]

## Module Internal Variables

<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 8%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 7%" />
<col style="width: 6%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr class="header">
<th>Variable Name</th>
<th>DataType</th>
<th>Resolution</th>
<th><p>Legal Range</p>
<p>(min)</p></th>
<th><p>Legal Range</p>
<p>(max)</p></th>
<th>Multiplicity</th>
<th>Software Segment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>StTrnsVctr_Cnt_D_b08</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_8</td>
</tr>
<tr class="even">
<td>WarmInitMilestoneRqst_Cnt_M_u32</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_32</td>
</tr>
<tr class="odd">
<td>WarmInitMilestoneRqst#_Cnt_M_u32</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>0:n</td>
<td>STAMD#_START_SEC_VAR_CLEARED_32</td>
</tr>
<tr class="even">
<td>EcuResetActive_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td><u>1:1</u></td>
<td><u>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</u></td>
</tr>
<tr class="odd">
<td>FBLTransitionActive_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td><u>1:1</u></td>
<td><u>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</u></td>
</tr>
<tr class="even">
<td>FinalNvMWriteInProgress_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
<tr class="odd">
<td>StopTODPerOperation_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
<tr class="even">
<td>TODState_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
<tr class="odd">
<td>TransitionComplete_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
<tr class="even">
<td>SystemState_Cnt_M_enum</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_INIT_UNSPECIFIED</td>
</tr>
<tr class="odd">
<td>SystemState#_Cnt_M_enum</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>0:n</td>
<td>STAMD#_START_SEC_VAR_INIT_UNSPECIFIED</td>
</tr>
<tr class="even">
<td>SysCSystemState_Cnt_M_enum</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_INIT_UNSPECIFIED</td>
</tr>
<tr class="odd">
<td><u>Lnk_TypeH#_Start</u></td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>0:n</td>
<td>AP_STAMD_CONST</td>
</tr>
<tr class="even">
<td><u>Lnk_TypeH#_Size</u></td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>0:n</td>
<td>AP_STAMD_CONST</td>
</tr>
<tr class="odd">
<td>ForceToOff_Cnt_M_lgc</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>Refer *</td>
<td>1:1</td>
<td>STAMD#_START_SEC_VAR_CLEARED_BOOLEAN</td>
</tr>
</tbody>
</table>

Note: “ Refer \*” - Refer to States_And_Modes_GeneratedCfg_MDD

Note “#” denotes application number(1 to n) which varies across
projects. Check project configuration files Under UTP/ Contract folder
for number of applications

### User defined typedef definition/declaration 

<table>
<colgroup>
<col style="width: 37%" />
<col style="width: 24%" />
<col style="width: 16%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="header">
<th>Typedef Name</th>
<th>Element Name</th>
<th>User Defined Type</th>
<th><p>Legal Range</p>
<p>(min)</p></th>
<th><p>Legal Range</p>
<p>(max)</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>TypeHInfoType_Str</td>
<td>Start</td>
<td>Const uint8 pointer</td>
<td>0</td>
<td>Full</td>
</tr>
<tr class="odd">
<td></td>
<td>Size</td>
<td>Uint32</td>
<td>0</td>
<td>Full</td>
</tr>
<tr class="even">
<td>Rte_ModeType_StaMd_Mode</td>
<td><p>RTE_MODE_StaMd_Mode_DISABLE</p>
<p>RTE_MODE_StaMd_Mode_OFF</p>
<p>RTE_MODE_StaMd_Mode_OPERATE</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT</p>
<p>RTE_TRANSITION_StaMd_Mode</p></td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
</tbody>
</table>

# Constant Data Dictionary

## Calibration Constants

| Constant Name            |
|--------------------------|
| k_StaMdsSysCDiag_Cnt_str |

##  [section-1]

## Program(fixed) Constants

### Embedded Constants

#### Local

| Constant Name               | Resolution | Units  | Value       |
|-----------------------------|------------|--------|-------------|
| D_STATELKPVCTRS_CNT_U16     | 1          | Counts | 16          |
| D_STATELKPSTATES_CNT_U16    | 1          | Counts | 4           |
| D_TVBITF_CNT_U16            | 1          | Counts | 0x01        |
| D_TVBITC_CNT_U16            | 1          | Counts | 0x02        |
| D_TVBITM_CNT_U16            | 1          | Counts | 0x04        |
| D_TVBITA_CNT_U16            | 1          | Counts | 0x08        |
| D_CLOSECHECKVALUE_CNT_U32   | 1          | Counts | 0 x00FF00FF |
| D_CLOSECHECKGARBAGE_CNT_U32 | 1          | Counts | 0x5555AAAA  |

#### Global

| Constant Name                                       |
|-----------------------------------------------------|
| \*D_STAMD_DIAGMGR_CLIENTSERVER_CALL                 |
|                                                     |
| \*D_TYPEHDATASIZE_CNT_U16                           |
| <span class="mark">\*D_DIAGMGR_SHUTDOWN_TASK</span> |
| \*BC_STAMD_TODSTEADYSTATE                           |
| \*BC_STAMD_TOD2MSTOGGLE                             |
| \*BC_STAMD_SYSCHKINCOREAPP                          |
|                                                     |

Note: \* Values of these Global data constants tend to change based on
project configuration. Check Project configuration files under
UTP/Contract folder

### Module specific Lookup Tables Constants

<table style="width:100%;">
<colgroup>
<col style="width: 32%" />
<col style="width: 11%" />
<col style="width: 40%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant Name</th>
<th>Resolution</th>
<th>Value</th>
<th>Software Segment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Rte_ModeType_StaMd_Mode t_StateLkpTbl_Cnt_u8
[D_STATELKPSTATES_CNT_U16] [D_STATELKPVCTRS_CNT_U16]</td>
<td>N/A</td>
<td><p>{ {RTE_MODE_StaMd_Mode_OFF,</p>
<blockquote>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_ DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_ DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_ WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_ DISABLE },</p>
</blockquote>
<p>{RTE_MODE_StaMd_Mode_OFF,</p>
<blockquote>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_OFF,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT},</p>
</blockquote>
<p>{RTE_MODE_StaMd_Mode_OPERATE,</p>
<blockquote>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE},</p>
</blockquote>
<p>{RTE_MODE_StaMd_Mode_DISABLE,</p>
<blockquote>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE,</p>
<p>RTE_MODE_StaMd_Mode_OPERATE,</p>
<p>RTE_MODE_StaMd_Mode_DISABLE}</p>
</blockquote>
<p>}</p></td>
<td>CONST_UNSPECIFIED</td>
</tr>
<tr class="even">
<td>T_CurrentSystemState_Ptr_enum[ *SIZE]</td>
<td>N/A</td>
<td>Refer *</td>
<td>AP_STAMD_CONST</td>
</tr>
<tr class="odd">
<td>T_TypeHInfo_Cnt_Str[ *SIZE]</td>
<td>TypeHInfoType_Str</td>
<td>Refer *</td>
<td>AP_STAMD_CONST</td>
</tr>
<tr class="even">
<td>T_WarmInitMilestoneRqst_Ptr_enum[*SIZE]</td>
<td>N/A</td>
<td>Refer *</td>
<td>AP_STAMD_CONST</td>
</tr>
</tbody>
</table>

**Note:** The entries in the state lookup table rely on the fact that
generated values for the system state are maintained. If the generated
values are changed then the entries have to re arranged.

Note: \* SIZE for above tables varies across projects.Check Project
configuration files for size and elements of tables.**.**

Note: Refer \* **:** Refer to States_And_Modes_GeneratedCfg_MDD

# Functions/Macros used by the Sub-Modules 

## Library Functions / Macros 

The library functions / Macros that are called by the various sub
modules are identified below,

1.  

## Data Hiding Functions

None

## Global Functions/Macros Defined by this Module

### Process WarmInit Milestone Complete

|                      |                                         |             |     |     |
|--------------|-------------------------------|------------|--------|--------|
| **Function Name**    | MilestoneRqst_WarmInitMilestoneComplete | Type        | Min | Max |
| **Arguments Passed** | user                                    | StaMd_Users | 0   | 31  |
| **Return Value**     | None                                    |             |     |     |

#### Description

![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image1.emf)

### Process WarmInit Milestone Not Complete

|                      |                                            |             |     |     |
|--------------|-------------------------------|------------|--------|--------|
| **Function Name**    | MilestoneRqst_WarmInitMilestoneNotComplete | Type        | Min | Max |
| **Arguments Passed** | user                                       | StaMd_Users | 0   | 31  |
| **Return Value**     | None                                       |             |     |     |

#### Description

![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image2.emf)

### States and Modes ECU Reset

|                      |                     |      |     |     |
|----------------------|---------------------|------|-----|-----|
| **Function Name**    | StaMd_SCom_EcuReset | Type | Min | Max |
| **Arguments Passed** | none                |      |     |     |
| **Return Value**     | None                |      |     |     |

#### Description

EcuResetActive_Cnt_M_lgc = TRUE

### States and Modes prepare for FBL transition request

|                      |                             |      |     |     |
|----------------------|-----------------------------|------|-----|-----|
| **Function Name**    | StaMd_SCom_FBLTransitionReq | Type | Min | Max |
| **Arguments Passed** | none                        |      |     |     |
| **Return Value**     | None                        |      |     |     |

#### Description

FBLTransitionActive_Cnt_M_lgc = TRUE

### States and Modes Transition Function

|                      |             |      |     |     |
|----------------------|-------------|------|-----|-----|
| **Function Name**    | StaMd_Trns1 | Type | Min | Max |
| **Arguments Passed** | none        |      |     |     |
| **Return Value**     | None        |      |     |     |

#### Description

*Note: D_STAMD_DIAGMGR_CLIENTSERVER_CALL is generated as STD_ON or
STD_OFF based on the configuration of the program.*

### States and Modes Initialization

#### Description – StaMd_Init0

|                      |             |      |     |     |
|----------------------|-------------|------|-----|-----|
| **Function Name**    | StaMd_Init0 | Type | Min | Max |
| **Arguments Passed** | none        |      |     |     |
| **Return Value**     | None        |      |     |     |

#### Description

![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image4.emf)

###  [section-2]

#### Description– StaMd_Init1

|                      |             |      |     |     |
|----------------------|-------------|------|-----|-----|
| **Function Name**    | StaMd_Init1 | Type | Min | Max |
| **Arguments Passed** | none        |      |     |     |
| **Return Value**     | None        |      |     |     |

#### Description

![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image5.emf)

### States and Modes Periodic

|                      |            |      |     |     |
|----------------------|------------|------|-----|-----|
| **Function Name**    | StaMd_Per1 | Type | Min | Max |
| **Arguments Passed** | none       |      |     |     |
| **Return Value**     | None       |      |     |     |

#### Description![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image6.emf)

![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image7.emf)

### System State Check

<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 39%" />
<col style="width: 17%" />
<col style="width: 13%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>SystemStateCheck</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>FTermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>CTermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>ATermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>RampStatusCmp_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>CtrldDmpStsCmp_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>TMFTestComplete_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>SysCFltCntr_Ptr_T_u16</td>
<td>uint16 *</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>FaultStatus_Cnt_T_enum</td>
<td>NxtrDiagMgrStatus</td>
<td colspan="2"><p>NTC_STATUS_PASSED</p>
<p>NTC_STATUS_FAILED</p>
<p>NTC_STATUS_PREPASSED</p>
<p>NTC_STATUS_PREFAILED</p></td>
</tr>
</tbody>
</table>

#### Description

#### ![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image8.emf) [section-3]

![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image9.emf)

## Local Functions/Macros Used by this MDD only

### Macro Function \#1

SetBits_m(var, mask) : var = var \| mask

### Macro Function \#2

ClrBits_m(var, mask) : var = var & mask

### Local Function \#1

<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 36%" />
<col style="width: 23%" />
<col style="width: 14%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>BldTranVctr</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>SysState_Cnt_T_Enum</td>
<td>Rte_ModeType_StaMd_Mode</td>
<td colspan="2"><p>RTE_MODE_StaMd_Mode_DISABLE</p>
<p>RTE_MODE_StaMd_Mode_OFF</p>
<p>RTE_MODE_StaMd_Mode_OPERATE</p>
<p>RTE_MODE_StaMd_Mode_WARMINIT</p>
<p>RTE_TRANSITION_StaMd_Mode</p></td>
</tr>
<tr class="odd">
<td></td>
<td>FTermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>CTermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>ATermActive_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>RampStatusCmp_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>CtrldDmpStsCmp_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>TransVec_Cnt_T_u8</td>
<td>uint8</td>
<td>FULL</td>
<td>FULL</td>
</tr>
</tbody>
</table>

#### Design Rationale

NvM_GetErrorStatus has been used instead of an RTE_Call_GetErrorStatus
in order to specify the blockID and also to prevent the integrator map
it to a wrong port interface.

#### Description![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image10.emf)

### Local Function \#2

|                      |           |      |     |     |
|----------------------|-----------|------|-----|-----|
| **Function Name**    | ReadTypeH | Type | Min | Max |
| **Arguments Passed** | None      |      |     |     |
| **Return Value**     | none      |      |     |     |

#### Design Rationale

ReadTypeH functions call has been added to this module although the FDD
doesn’t call them out as this module performs the system NvH memory read
after system power up.

#### Description

![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image11.emf)

### Local Function \#3

|                      |            |      |     |     |
|----------------------|------------|------|-----|-----|
| **Function Name**    | WriteTypeH | Type | Min | Max |
| **Arguments Passed** | none       |      |     |     |
| **Return Value**     | none       |      |     |     |

#### Design Rationale

WriteTypeH functions call has been added to this module although the FDD
doesn’t call them out as this module performs the system NvH memory
write before system shutdown.

#### Description

![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image12.emf)

### Local Function \#4

|                      |                                 |         |       |      |
|--------|--------------------------|-----------------|-----------|-----------|
| **Function Name**    | CheckWarmInitComplete           | Type    | Min   | Max  |
| **Arguments Passed** | None                            |         |       |      |
| **Return Value**     | WarmInitMilestoneComp_Cnt_T_lgc | Boolean | FALSE | TRUE |

#### Description

# ![](ElectricPowerSteering_TexasInstruments_HAITEC_LC_website/docs/StaMd/doc/mediax/media/image13.emf) Software Module Implementation

## Initial Data Values

| Data          | Value           |
|---------------|-----------------|
| CTerm_Cnt_lgc | D_FALSE_CNT_LGC |
| ATerm_Cnt_lgc | D_TRUE_CNT_LGC  |
| FTerm_Cnt_lgc | D_FALSE_CNT_LGC |

##  [section-4]

## Initialization Functions

### Init: 

## Periodic Functions

## Fault Recovery Functions

None

## Shutdown Functions

None

## Interrupt Functions

None

## Serial Communication Functions

## Execution Requirements

## Execution Sequence of the Module

## \_Init0 is called outside of the Rte, from ECUStartup and needs to RUN prior to any function that requires the use of TypeH data.Execution Rates for sub-modules called by the Scheduler [init0-is-called-outside-of-the-rte-from-ecustartup-and-needs-to-run-prior-to-any-function-that-requires-the-use-of-typeh-data.execution-rates-for-sub-modules-called-by-the-scheduler]

| Function Name | Calling Frequency | System State(s) in which the function is called |
|----------------------------|-----------------|----------------------------|
| StaMd_Init0   | Once at init      | Cold Init                                       |
|               |                   |                                                 |
|               |                   |                                                 |

## Execution Requirements for Serial Communication Functions 

| Function Name | Sub-Module called by (Serial Comm Function Name) |
|---------------|--------------------------------------------------|
|               |                                                  |

#  [section-5]

#  Memory Map Definition Requirements

## Sub Modules (Functions)

This table identifies the software segments for functions identified in
this module.

| Name of Sub Module | Software Segment |
|--------------------|------------------|
|                    |                  |
|                    |                  |
|                    |                  |
|                    |                  |

##  [section-6]

## Global and Local Functions

This table identifies the software segments for global and local
functions identified in this module.

| Name of Sub Module                         | Software Segment       |
|--------------------------------------------|------------------------|
| BldTranVctr                                | RTE_AP_STAMD_APPL_CODE |
| MilestoneRqst_WarmInitMilestoneComplete    | RTE_AP_STAMD_APPL_CODE |
| MilestoneRqst_WarmInitMilestoneNotComplete | RTE_AP_STAMD_APPL_CODE |
| ReadTypeH                                  | RTE_AP_STAMD_APPL_CODE |
| WriteTypeH                                 | RTE_AP_STAMD_APPL_CODE |
| CheckWarmInitComplete                      | RTE_AP_STAMD_APPL_CODE |
| SystemStateCheck                           | RTE_AP_STAMD_APPL_CODE |
| StaMd_SCom_EcuReset                        | RTE_AP_STAMD_APPL_CODE |
| StaMd_Trns1                                | RTE_AP_STAMD_APPL_CODE |
| StaMd_Per1                                 | RTE_AP_STAMD_APPL_CODE |
| StaMd_Init0                                | AP_STAMD_CODE          |
| StaMd_Init1                                | RTE_AP_STAMD_APPL_CODE |

#  [section-7]

#  Known Issues / Limitations With Design

1.  .FDD does not currently support “Transition” state required for RTE
    runnables triggered on state transitions. Current design simply does
    nothing if in “Transition” state.

2.  FDD requirement state that an off state milestone is considered as
    complete when all the NVM writes are complete. This milestone is
    currently performed internally by querying the NVM write status in
    this module.

3.  FDD calls out for the F Term input to this module as a Boolean type
    diagnostic flag that is used to indicate a fault requesting removal
    of assist and currently there is no requirement for a component to
    send out this flag(according to FDD data dictionary version 86 dated
    16^th^ Mar 2012). However, it has been implemented in Diagnostic
    manager version FDD37B_001.6

#  Revision Control Log

|             |            |                                                                                                 |            |                     |
|------|-------|------------------------------------------|----------|---------|
| **Item \#** | **Rev \#** | **Change Description**                                                                          | **Date**   | **Author Initials** |
| 1           | 1          | Initial EA3.0 version.                                                                          | 11-Apr-11  | LWW                 |
| 2           | 2          | Updated range errors found during UTP                                                           | 13-Apr-11  | LWW                 |
| 3           | 3          | Added RampStatusCmp_Cnt_T_lgc                                                                   | 05-Jan-12  | M. Story            |
| 4           | 4          | Updated for issues found at Unit Test                                                           | 30-Jan-12  | M. Story            |
| 5           | 5          | Updates to meet FDD 10C v006                                                                    | 20-Mar-12  | VK                  |
| 6           | 6          | Updates to fix anomaly 3143                                                                     | 09-Apr-12  | VK                  |
| 7           | 7          | Added SCom function and logic to perform ECU Reset                                              | 26-Apr-12  | LWW                 |
| 8           | 8          | Updated to fix Anom 3158 for LookUpTable                                                        | 7-May-12   | NRAR                |
| 9           | 9          | Added EEPROM Failed to Close check                                                              | 27-Jul-12  | OT                  |
| 10          | 10         | Changed write complete check on Close Check diagnostic                                          | 03-Aug-12  | LWW                 |
| 11          | 11         | Added checkpoints, removed call to end operation cycle, added a MemMap section for const table  | 21-Sep-12  | LWW                 |
| 12          | 12         | Updated to the latest src(v16)                                                                  | 15-Feb-13  | VK                  |
| 13          | 13         | Moved state transition complete logic ahead of the switch case statement to always be performed | 05-Jun-13  | KJS                 |
| 14          | 14         | Applied final changes to A5108 correction in Per1                                               | 05-Jun-13  | KJS                 |
| 15          | 15         | Changes made to MDD to be more generic for all projects                                         | 18-June-13 | NRAR                |
| 16          | 16         | MDD version updated to match synergy version                                                    | 27-June-13 | NRAR                |
| 17          | 17         | Fixed anomaly 5205, added logic to force TOD low in toggle mode during powerdown.               | 27-June-13 | LWW                 |
| 18          | 18         | Add configurable macro NVMGETERRORSTATUS() CR#11065                                             | 11-Dec-13  | BDO                 |
| 19          | 19         | Added StaMd_Init0 as a trusted call to only handle ReadTypeH memory across applications         | 12-Dec-13  | BDO                 |
| 20          | 20         | Change designation of StaMd_Init0 from RTE_AP_STAMD_APPL_CODE to AP_STAMD_CODE.                 | 20-Dec-13  | BDO                 |
| 21          | 21         | Update to FDD ES10B version 13 to address anomaly 5388 - 11347                                  | 07-Feb-14  | BDO                 |
| 22          | 22         | Anomaly 7307 - software updates for consistency with FDD ES10B version 13 12602                 | 28-Oct-14  | BDO                 |

{% endraw %}